<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../../../bower_components/paper-tooltip/paper-tooltip.html">

<!--
    @author Robin Duda
    Realm chat.
 -->

<dom-module id="game-menu">
    <link rel="import" href="../../style/theme.css" type="css">
    <link rel="import" href="../../style/style.css" type="css">
    <template>
        <style>
            :host {
            }

            .interface-box {
                cursor: pointer;
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                right: 16px;
                display: block;
                padding-left: 8px;
                padding-right: 8px;
                z-index: 400;
            }

            .menu-icon {
                display: block;
                max-height: 32px;
                max-width: 32px;
                margin-top: 6px;
                margin-bottom: 6px;
                fill: #fff;
            }

            .menu-icon-disabled {
                fill: #646464;
            }

            .menu-icon:hover {
                fill: var(--accent-color);
            }

            .menu-icon-disabled:hover {
                fill: #646464;
            }

        </style>

        <!-- svg icons are inlined to allow changing the fill color on hover. -->
        <paper-material elevation="3" class="interface-box">

            <template is="dom-if" if="{{_loaded(realm)}}">
                <div>
                    <svg on-down="_inventory" class="menu-icon">
                        <use href$="[[realm.resources]]gui/menu/inventory.svg#root"></use>
                    </svg>
                    <paper-tooltip animation-delay="0" class="tooltip" position="left">
                        <span class="description">Inventory [H]</span>
                    </paper-tooltip>
                </div>

                <div>
                    <svg class="menu-icon menu-icon-disabled">
                        <use href$="[[realm.resources]]gui/menu/spell-book.svg#root"></use>
                    </svg>
                    <paper-tooltip animation-delay="0" class="tooltip" position="left">
                        <span class="description">Spells & Abilities [N]</span>
                    </paper-tooltip>
                </div>

                <div>
                    <svg class="menu-icon menu-icon-disabled">
                        <use href$="[[realm.resources]]gui/menu/skills.svg#root"></use>
                    </svg>
                    <paper-tooltip animation-delay="0" class="tooltip" position="left">
                        <span class="description">Skills [M]</span>
                    </paper-tooltip>
                </div>

                <div>
                    <svg on-down="_quests" class="menu-icon">
                        <use href$="[[realm.resources]]gui/menu/quests.svg#root"></use>
                    </svg>
                    <paper-tooltip animation-delay="0" class="tooltip" position="left">
                        <span class="description">Quests [K]</span>
                    </paper-tooltip>
                </div>

                <div>
                    <svg on-down="_friends" class="menu-icon">
                        <use href$="[[realm.resources]]gui/menu/friends.svg#root"></use>
                    </svg>
                    <paper-tooltip animation-delay="0" class="tooltip" position="left">
                        <span class="description">Friends [J]</span>
                    </paper-tooltip>
                </div>

                <div>
                    <svg on-down="_settings" class="menu-icon menu-icon-disabled">
                        <use href$="[[realm.resources]]gui/menu/settings.svg#root"></use>
                    </svg>
                    <paper-tooltip animation-delay="0" class="tooltip" position="left">
                        <span class="description">Settings [P]</span>
                    </paper-tooltip>
                </div>

                <div>
                    <svg on-down="_characters" class="menu-icon">
                        <use href$="[[realm.resources]]gui/menu/leave.svg#root"></use>
                    </svg>
                    <paper-tooltip animation-delay="0" class="tooltip" position="left">
                        <span class="description">Leave [L]</span>
                    </paper-tooltip>
                </div>
            </template>
        </paper-material>

    </template>
    <script>
        class GameMenu extends Polymer.GestureEventListeners(Polymer.Element) {

            static get is() {
                return 'game-menu';
            }

            constructor() {
                super();
                this.realm = {};

                application.onRealmLoaded(realm => {
                    this.realm = realm;
                });
            }

            _loaded() {
                return (typeof this.realm !== 'undefined');
            }

            _inventory() {
                application.publish('show-inventory');
            }

            _quests() {
                application.publish('show-quests');
            }

            _friends() {
                application.publish('show-friends');
            }

            _settings() {
                application.publish('show-settings');
            }

            _characters(e) {
                game.shutdown();
                application.scriptShutdown();
                application.showCharacters();
            }
        }
        window.customElements.define(GameMenu.is, GameMenu);
    </script>
</dom-module>